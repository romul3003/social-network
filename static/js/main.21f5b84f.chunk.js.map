{"version":3,"sources":["assets/images/user.png","components/Navbar/Navbar.module.css","api/api.js","redux/dialogsReducer.js","components/common/Preloader/Preloader.module.css","components/Navbar/Navbar.js","components/Header/Header.js","redux/authReducer.js","components/Header/HeaderContainer.js","utils/objectHelpers.js","redux/usersReducer.js","components/common/Paginator/Paginator.js","components/Users/User.js","components/Users/Users.js","redux/usersSelectors.js","components/Users/UsersContainer.js","components/Login/Login.js","redux/appRecucer.js","redux/sidebarReducer.js","redux/store.js","hoc/withSuspense.js","components/NotFound/NotFound.js","App.js","index.js","components/common/Preloader/Preloader.js","components/common/FormsControls/FormsControls.js","utils/validators/validators.js","components/Users/Users.module.css","components/common/Paginator/Paginator.module.css","components/Header/Header.module.css","components/Login/Login.module.css","components/common/FormsControls/FormsControls.module.css","redux/profileReducer.js"],"names":["module","exports","instance","axios","withCredentials","baseURL","headers","usersAPI","getUsers","currentPage","pageSize","get","response","data","follow","userId","post","unfollow","delete","profileAPI","getProfile","getStatus","updateStatus","status","put","savePhoto","photoFile","formData","FormData","append","saveProfile","profile","authAPI","me","login","email","password","rememberMe","captcha","logout","securityAPI","getCaptchaUrl","SEND_MESSAGE","initialState","dialogs","id","name","messages","message","sendMessage","newMessageBody","type","dialogsReducer","state","action","body","Navbar","className","classes","nav","item","to","item_link","activeClassName","activeLink","Header","props","header","src","alt","login_block","isAuth","onClick","SET_USER_DATA","isFetching","captchaUtl","setAuthUserData","payload","getCaptchaUrlSuccess","captchaUrl","getAuthUserData","dispatch","a","resultCode","url","then","authReducer","HeaderContainer","this","Component","connect","auth","updataObjectInArray","items","itemId","objPropName","newObjProps","map","FOLLOW","UNFOLLOW","SET_USERS","SET_CURRENT_PAGE","SET_TOTAL_USERS_COUNT","TOGGLE_IS_FETCHING","users","totalUsersCount","followingInProgress","followSuccess","unfollowSuccess","toggleIsFetching","toggleIsFollowingProgress","follorUnfollowFlow","apiMethod","actionCreator","usersReducer","followed","count","filter","Paginator","onPageChanged","totalItemsCount","portionSize","pagesCount","Math","ceil","pages","i","push","portionCount","useState","portionNumber","setPortionNumber","leftPortionPageNumber","rightPortionPageNumber","paginationList","page","selectedPage","trim","key","User","user","photos","small","userPhoto","disabled","some","Users","wrap","createSelector","usersPage","getPageSize","getTotalUsersCount","getCurrentPage","getIsFetching","getFollowingInProgress","UsersContainer","pageNumber","requestUsers","Preloader","compose","bind","totalCount","LoginReduxForm","reduxForm","form","handleSubmit","error","onSubmit","Field","placeholder","component","Input","validate","required","createField","form_summary_error","length","stopSubmit","_error","INITIALIZED_SUCCESS","initialized","appReducer","sidebarReducer","reducers","combineReducers","profilePage","profileReducer","dialogsPage","sidebar","formReducer","app","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","store","createStore","applyMiddleware","thunkMiddleware","withSuspense","fallback","NotFound","style","padding","DialogsContainer","React","lazy","ProfileContainer","App","initializeApp","exact","from","path","render","AppContainer","withRouter","promise","Promise","all","MainApp","ReactDOM","document","getElementById","spinner","FormControl","input","meta","touched","restProps","warning","hasError","form_control","children","Textarea","validators","text","value","undefined","maxLength","max","ADD_POST","SET_USER_PROFILE","SET_STATUS","DELETE_POST","SAVE_PHOTO_SUCCESS","posts","likesCount","addPost","newPost","setStatus","getUserProfile","console","log","file","getState","reject","postId"],"mappings":"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","file":"static/js/main.21f5b84f.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/user.8b1dbb1f.png\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"Navbar_nav__3_z3o\",\"item\":\"Navbar_item__1egrU\",\"item_link\":\"Navbar_item_link__3-n4l\",\"activeLink\":\"Navbar_activeLink__3f3su\"};","import * as axios from 'axios'\r\n\r\nconst instance = axios.create({\r\n\twithCredentials: true,\r\n\tbaseURL: 'https://social-network.samuraijs.com/api/1.0/',\r\n\theaders: {\r\n\t\t'API-KEY': '181444e6-0220-4eb1-89bc-25ecf37bb2b5',\r\n\t},\r\n})\r\n\r\nexport const usersAPI = {\r\n\tasync getUsers(currentPage = 1, pageSize = 10) {\r\n\t\tconst response = await instance.get(\r\n\t\t\t`users?page=${currentPage}&count=${pageSize}`\r\n\t\t)\r\n\t\treturn response.data\r\n\t},\r\n\tasync follow(userId = 2) {\r\n\t\tconst response = await instance.post(`follow/${userId}`)\r\n\t\treturn response.data\r\n\t},\r\n\tasync unfollow(userId = 2) {\r\n\t\tconst response = await instance.delete(`follow/${userId}`)\r\n\t\treturn response.data\r\n\t},\r\n}\r\n\r\nexport const profileAPI = {\r\n\tasync getProfile(userId) {\r\n\t\tconst response = await instance.get(`profile/${userId}`)\r\n\t\treturn response.data\r\n\t},\r\n\tasync getStatus(userId) {\r\n\t\tconst response = await instance.get(`profile/status/${userId}`)\r\n\t\treturn response.data\r\n\t},\r\n\tasync updateStatus(status) {\r\n\t\tconst response = await instance.put('profile/status', { status })\r\n\t\treturn response.data\r\n\t},\r\n\tasync savePhoto(photoFile) {\r\n\t\tconst formData = new FormData()\r\n\t\tformData.append('image', photoFile)\r\n\t\tconst response = await instance.put('profile/photo', formData, {\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-type': 'multipart/form-data',\r\n\t\t\t},\r\n\t\t})\r\n\t\treturn response.data\r\n\t},\r\n\tasync saveProfile(profile) {\r\n\t\tconst response = await instance.put('profile', profile)\r\n\t\treturn response.data\r\n\t},\r\n}\r\n\r\nexport const authAPI = {\r\n\tasync me() {\r\n\t\tconst response = await instance.get(`auth/me`)\r\n\t\treturn response.data\r\n\t},\r\n\tasync login(email, password, rememberMe = false, captcha = null) {\r\n\t\tconst response = await instance.post(`auth/login`, {\r\n\t\t\temail,\r\n\t\t\tpassword,\r\n\t\t\trememberMe,\r\n\t\t\tcaptcha,\r\n\t\t})\r\n\t\treturn response.data\r\n\t},\r\n\tasync logout() {\r\n\t\tconst response = await instance.delete(`auth/login`)\r\n\t\treturn response.data\r\n\t},\r\n}\r\n\r\nexport const securityAPI = {\r\n\tasync getCaptchaUrl() {\r\n\t\tconst response = await instance.get('security/get-captcha-url')\r\n\t\treturn response.data\r\n\t},\r\n}\r\n","const SEND_MESSAGE = 'social-network/dialogs/SEND_MESSAGE'\r\n\r\nconst initialState = {\r\n\tdialogs: [\r\n\t\t{ id: 1, name: 'Dimych' },\r\n\t\t{ id: 2, name: 'Andrey' },\r\n\t\t{ id: 3, name: 'Sveta' },\r\n\t\t{ id: 4, name: 'Sasha' },\r\n\t\t{ id: 5, name: 'Victor' },\r\n\t\t{ id: 6, name: 'Valera' },\r\n\t],\r\n\tmessages: [\r\n\t\t{ id: 1, message: 'Hi' },\r\n\t\t{ id: 2, message: 'How are you?' },\r\n\t\t{ id: 3, message: 'Yo!' },\r\n\t],\r\n}\r\n\r\nconst dialogsReducer = (state = initialState, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase SEND_MESSAGE: {\r\n\t\t\tconst body = action.newMessageBody\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tmessages: [...state.messages, { id: 6, message: body }],\r\n\t\t\t}\r\n\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n\r\nexport const sendMessage = newMessageBody => ({\r\n\ttype: SEND_MESSAGE,\r\n\tnewMessageBody,\r\n})\r\n\r\nexport default dialogsReducer\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"spinner\":\"Preloader_spinner__NCAj0\",\"lds-spinner\":\"Preloader_lds-spinner__1QAuZ\"};","import React from 'react'\r\nimport { NavLink } from 'react-router-dom'\r\nimport classes from './Navbar.module.css'\r\n\r\nconst Navbar = () => (\r\n\t<nav className={classes.nav}>\r\n\t\t<div className={classes.item}>\r\n\t\t\t<NavLink\r\n\t\t\t\tto=\"/profile\"\r\n\t\t\t\tclassName={classes.item_link}\r\n\t\t\t\tactiveClassName={classes.activeLink}\r\n\t\t\t>\r\n\t\t\t\tProfile\r\n\t\t\t</NavLink>\r\n\t\t</div>\r\n\t\t<div className={classes.item}>\r\n\t\t\t<NavLink\r\n\t\t\t\tto=\"/dialogs\"\r\n\t\t\t\tclassName={classes.item_link}\r\n\t\t\t\tactiveClassName={classes.activeLink}\r\n\t\t\t>\r\n\t\t\t\tMessages\r\n\t\t\t</NavLink>\r\n\t\t</div>\r\n\t\t<div className={classes.item}>\r\n\t\t\t<NavLink\r\n\t\t\t\tto=\"/users\"\r\n\t\t\t\tclassName={classes.item_link}\r\n\t\t\t\tactiveClassName={classes.activeLink}\r\n\t\t\t>\r\n\t\t\t\tUsers\r\n\t\t\t</NavLink>\r\n\t\t</div>\r\n\t\t<div className={classes.item}>\r\n\t\t\t<NavLink\r\n\t\t\t\tto=\"/news\"\r\n\t\t\t\tclassName={classes.item_link}\r\n\t\t\t\tactiveClassName={classes.activeLink}\r\n\t\t\t>\r\n\t\t\t\tNews\r\n\t\t\t</NavLink>\r\n\t\t</div>\r\n\t\t<div className={classes.item}>\r\n\t\t\t<NavLink\r\n\t\t\t\tto=\"/music\"\r\n\t\t\t\tclassName={classes.item_link}\r\n\t\t\t\tactiveClassName={classes.activeLink}\r\n\t\t\t>\r\n\t\t\t\tMusic\r\n\t\t\t</NavLink>\r\n\t\t</div>\r\n\t\t<div className={classes.item}>\r\n\t\t\t<NavLink\r\n\t\t\t\tto=\"/settings\"\r\n\t\t\t\tclassName={classes.item_link}\r\n\t\t\t\tactiveClassName={classes.activeLink}\r\n\t\t\t>\r\n\t\t\t\tSettings\r\n\t\t\t</NavLink>\r\n\t\t</div>\r\n\t</nav>\r\n)\r\n\r\nexport default Navbar\r\n","import React from 'react'\r\nimport classes from './Header.module.css'\r\nimport { NavLink } from 'react-router-dom'\r\n\r\nconst Header = props => {\r\n\treturn (\r\n\t\t<header className={classes.header}>\r\n\t\t\t<img\r\n\t\t\t\tsrc=\"https://cdn3.f-cdn.com//files/download/70016655/Logo%202.png\"\r\n\t\t\t\talt=\"\"\r\n\t\t\t/>\r\n\r\n\t\t\t<div className={classes.login_block}>\r\n\t\t\t\t{props.isAuth ? (\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t{props.login} - <button onClick={props.logout}>Logout</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<NavLink to={'/login'}>Login</NavLink>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</header>\r\n\t)\r\n}\r\n\r\nexport default Header\r\n","import { authAPI, securityAPI } from '../api/api'\r\nimport { stopSubmit } from 'redux-form'\r\n\r\nconst SET_USER_DATA = 'social-network/auth/SET_USER_DATA'\r\nconst GET_CAPTCHA_URL_SUCCESS = 'social-network/auth/GET_CAPTCHA_URL_SUCCESS'\r\n\r\nconst initialState = {\r\n\tuserId: null,\r\n\temail: null,\r\n\tlogin: null,\r\n\tisAuth: false,\r\n\tisFetching: false,\r\n\tcaptchaUtl: null, // if null, then captcha is not required\r\n}\r\n\r\nconst authReducer = (state = initialState, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase SET_USER_DATA:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t...action.payload,\r\n\t\t\t}\r\n\r\n\t\tcase GET_CAPTCHA_URL_SUCCESS:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t...action.payload,\r\n\t\t\t}\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n\r\n// action creators\r\nexport const setAuthUserData = (userId, email, login, isAuth) => ({\r\n\ttype: SET_USER_DATA,\r\n\tpayload: { userId, email, login, isAuth },\r\n})\r\n\r\nexport const getCaptchaUrlSuccess = captchaUrl => ({\r\n\ttype: GET_CAPTCHA_URL_SUCCESS,\r\n\tpayload: { captchaUrl },\r\n})\r\n\r\n// thunk creators\r\nexport const getAuthUserData = () => async dispatch => {\r\n\tconst data = await authAPI.me()\r\n\tif (data.resultCode === 0) {\r\n\t\tconst { id, email, login } = data.data\r\n\t\tdispatch(setAuthUserData(id, email, login, true))\r\n\t}\r\n}\r\n\r\nexport const login = (\r\n\temail,\r\n\tpassword,\r\n\trememberMe,\r\n\tcaptcha\r\n) => async dispatch => {\r\n\tconst data = await authAPI.login(email, password, rememberMe, captcha)\r\n\tif (data.resultCode === 0) {\r\n\t\t// success, get auth data\r\n\t\tdispatch(getAuthUserData())\r\n\t} else {\r\n\t\tif (data.resultCode === 10) {\r\n\t\t\tdispatch(getCaptchaUrl())\r\n\t\t}\r\n\t\tconst message = data.messages.length > 0 ? data.messages[0] : 'Some error'\r\n\t\tdispatch(stopSubmit('login', { _error: message }))\r\n\t}\r\n}\r\n\r\nexport const getCaptchaUrl = () => async dispatch => {\r\n\tconst data = await securityAPI.getCaptchaUrl()\r\n\tconst { url: captchaUrl } = data\r\n\tdispatch(getCaptchaUrlSuccess(captchaUrl))\r\n}\r\n\r\nexport const logout = () => dispatch => {\r\n\tauthAPI.logout().then(data => {\r\n\t\tif (data.resultCode === 0) {\r\n\t\t\tdispatch(setAuthUserData(null, null, null, false))\r\n\t\t}\r\n\t})\r\n}\r\n\r\nexport default authReducer\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport Header from './Header'\r\nimport { logout } from '../../redux/authReducer'\r\n\r\nclass HeaderContainer extends Component {\r\n\trender() {\r\n\t\treturn <Header {...this.props} />\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n\tisAuth: state.auth.isAuth,\r\n\tlogin: state.auth.login,\r\n})\r\n\r\nexport default connect(mapStateToProps, { logout })(HeaderContainer)\r\n","export const updataObjectInArray = (\r\n\titems,\r\n\titemId,\r\n\tobjPropName,\r\n\tnewObjProps\r\n) => {\r\n\treturn items.map(item => {\r\n\t\tif (item[objPropName] === itemId) {\r\n\t\t\treturn { ...item, ...newObjProps }\r\n\t\t}\r\n\t\treturn item\r\n\t})\r\n}\r\n","import { usersAPI } from '../api/api'\r\nimport { updataObjectInArray } from '../utils/objectHelpers'\r\n\r\nconst FOLLOW = 'social-network/users/FOLLOW'\r\nconst UNFOLLOW = 'social-network/users/UNFOLLOW'\r\nconst SET_USERS = 'social-network/users/SET_USERS'\r\nconst SET_CURRENT_PAGE = 'social-network/users/SET_CURRENT_PAGE'\r\nconst SET_TOTAL_USERS_COUNT = 'social-network/users/SET_TOTAL_USERS_COUNT'\r\nconst TOGGLE_IS_FETCHING = 'social-network/users/TOGGLE_IS_FETCHING'\r\nconst TOGGLE_IS_FOLLOWING_PROGRESS =\r\n\t'social-network/users/TOGGLE_IS_FOLLOWING_PROGRESS'\r\n\r\nconst initialState = {\r\n\tusers: [],\r\n\tpageSize: 10,\r\n\ttotalUsersCount: 0,\r\n\tcurrentPage: 1,\r\n\tisFetching: true,\r\n\tfollowingInProgress: [],\r\n}\r\n\r\nconst usersReducer = (state = initialState, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase FOLLOW:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tusers: updataObjectInArray(state.users, action.userId, 'id', {\r\n\t\t\t\t\tfollowed: true,\r\n\t\t\t\t}),\r\n\t\t\t}\r\n\t\tcase UNFOLLOW:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tusers: updataObjectInArray(state.users, action.userId, 'id', {\r\n\t\t\t\t\tfollowed: false,\r\n\t\t\t\t}),\r\n\t\t\t}\r\n\t\tcase SET_USERS:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tusers: action.users,\r\n\t\t\t}\r\n\t\tcase SET_CURRENT_PAGE:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tcurrentPage: action.currentPage,\r\n\t\t\t}\r\n\t\tcase SET_TOTAL_USERS_COUNT:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\ttotalUsersCount: action.count,\r\n\t\t\t}\r\n\t\tcase TOGGLE_IS_FETCHING:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tisFetching: action.isFetching,\r\n\t\t\t}\r\n\r\n\t\tcase TOGGLE_IS_FOLLOWING_PROGRESS:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tfollowingInProgress: action.isFetching\r\n\t\t\t\t\t? [...state.followingInProgress, action.userId]\r\n\t\t\t\t\t: state.followingInProgress.filter(id => id !== action.userId),\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n\r\n// action creators\r\nexport const followSuccess = userId => ({ type: FOLLOW, userId })\r\nexport const unfollowSuccess = userId => ({ type: UNFOLLOW, userId })\r\nexport const setUsers = users => ({ type: SET_USERS, users })\r\nexport const setCurrentPage = currentPage => ({\r\n\ttype: SET_CURRENT_PAGE,\r\n\tcurrentPage,\r\n})\r\nexport const setTotalUsersCount = totalUsersCount => ({\r\n\ttype: SET_TOTAL_USERS_COUNT,\r\n\tcount: totalUsersCount,\r\n})\r\nexport const toggleIsFetching = isFetching => ({\r\n\ttype: TOGGLE_IS_FETCHING,\r\n\tisFetching,\r\n})\r\nexport const toggleIsFollowingProgress = (isFetching, userId) => ({\r\n\ttype: TOGGLE_IS_FOLLOWING_PROGRESS,\r\n\tisFetching,\r\n\tuserId,\r\n})\r\n\r\n// thunk creators\r\nexport const requestUsers = (page, pageSize) => {\r\n\treturn async dispatch => {\r\n\t\tdispatch(toggleIsFetching(true))\r\n\t\tdispatch(setCurrentPage(page))\r\n\r\n\t\tconst data = await usersAPI.getUsers(page, pageSize)\r\n\t\tdispatch(toggleIsFetching(false))\r\n\t\tdispatch(setUsers(data.items))\r\n\t\tdispatch(setTotalUsersCount(data.totalCount))\r\n\t}\r\n}\r\n\r\nconst follorUnfollowFlow = async (\r\n\tdispatch,\r\n\tuserId,\r\n\tapiMethod,\r\n\tactionCreator\r\n) => {\r\n\tdispatch(toggleIsFollowingProgress(true, userId))\r\n\tconst data = await apiMethod(userId)\r\n\r\n\tif (data.resultCode === 0) {\r\n\t\tdispatch(actionCreator(userId))\r\n\t}\r\n\tdispatch(toggleIsFollowingProgress(false, userId))\r\n}\r\n\r\nexport const follow = userId => {\r\n\treturn async dispatch => {\r\n\t\tfollorUnfollowFlow(\r\n\t\t\tdispatch,\r\n\t\t\tuserId,\r\n\t\t\tusersAPI.follow.bind(usersAPI),\r\n\t\t\tfollowSuccess\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport const unfollow = userId => {\r\n\treturn async dispatch => {\r\n\t\tfollorUnfollowFlow(\r\n\t\t\tdispatch,\r\n\t\t\tuserId,\r\n\t\t\tusersAPI.unfollow.bind(usersAPI),\r\n\t\t\tunfollowSuccess\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default usersReducer\r\n","import React, { useState } from 'react'\r\nimport classes from './Paginator.module.css'\r\n\r\nconst Paginator = ({\r\n\tcurrentPage,\r\n\tonPageChanged,\r\n\ttotalItemsCount,\r\n\tpageSize,\r\n\tportionSize = 10,\r\n}) => {\r\n\tconst pagesCount = Math.ceil(totalItemsCount / pageSize)\r\n\r\n\tconst pages = []\r\n\tfor (let i = 1; i <= pagesCount; i++) {\r\n\t\tpages.push(i)\r\n\t}\r\n\r\n\tconst portionCount = Math.ceil(pagesCount / portionSize)\r\n\tconst [portionNumber, setPortionNumber] = useState(1)\r\n\tconst leftPortionPageNumber = (portionNumber - 1) * portionSize + 1\r\n\tconst rightPortionPageNumber = portionNumber * portionSize\r\n\r\n\treturn (\r\n\t\t<div className={classes.paginationList}>\r\n\t\t\t{portionNumber > 1 && (\r\n\t\t\t\t<button onClick={() => setPortionNumber(portionNumber - 1)}>\r\n\t\t\t\t\tPREV\r\n\t\t\t\t</button>\r\n\t\t\t)}\r\n\t\t\t{pages\r\n\t\t\t\t.filter(page => {\r\n\t\t\t\t\treturn page >= leftPortionPageNumber && page <= rightPortionPageNumber\r\n\t\t\t\t})\r\n\t\t\t\t.map(page => (\r\n\t\t\t\t\t<span\r\n\t\t\t\t\t\tclassName={`${currentPage === page ? classes.selectedPage : ''} ${\r\n\t\t\t\t\t\t\tclasses.page\r\n\t\t\t\t\t\t}`.trim()}\r\n\t\t\t\t\t\tkey={page}\r\n\t\t\t\t\t\tonClick={() => onPageChanged(page)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{page}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t))}\r\n\t\t\t{portionCount > portionNumber && (\r\n\t\t\t\t<button onClick={() => setPortionNumber(portionNumber + 1)}>\r\n\t\t\t\t\tNEXT\r\n\t\t\t\t</button>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Paginator\r\n","import React from 'react'\r\nimport { NavLink } from 'react-router-dom'\r\nimport userPhoto from '../../assets/images/user.png'\r\nimport classes from './Users.module.css'\r\n\r\nconst User = ({ user, followingInProgress, follow, unfollow }) => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<span>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<NavLink to={'/profile/' + user.id}>\r\n\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\tsrc={user.photos.small !== null ? user.photos.small : userPhoto}\r\n\t\t\t\t\t\t\talt={user.name}\r\n\t\t\t\t\t\t\tclassName={classes.userPhoto}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</NavLink>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t{user.followed ? (\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tdisabled={followingInProgress.some(id => id === user.id)}\r\n\t\t\t\t\t\t\tonClick={() => unfollow(user.id)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tUnfollow\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tdisabled={followingInProgress.some(id => id === user.id)}\r\n\t\t\t\t\t\t\tonClick={() => follow(user.id)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tFollow\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</span>\r\n\t\t\t<span>\r\n\t\t\t\t<div>{user.name}</div>\r\n\t\t\t\t<div>{user.status}</div>\r\n\t\t\t</span>\r\n\t\t\t<span>\r\n\t\t\t\t<div>{'user.location.country'}</div>\r\n\t\t\t\t<div>{'user.location.city'}</div>\r\n\t\t\t</span>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default User\r\n","import React from 'react'\r\nimport classes from './Users.module.css'\r\nimport Paginator from '../common/Paginator/Paginator'\r\nimport User from './User'\r\n\r\nconst Users = ({\r\n\tcurrentPage,\r\n\tonPageChanged,\r\n\ttotalUsersCount,\r\n\tpageSize,\r\n\tusers,\r\n\tfollowingInProgress,\r\n\tfollow,\r\n\tunfollow,\r\n}) => {\r\n\treturn (\r\n\t\t<div className={classes.wrap}>\r\n\t\t\t<Paginator\r\n\t\t\t\tcurrentPage={currentPage}\r\n\t\t\t\tonPageChanged={onPageChanged}\r\n\t\t\t\ttotalItemsCount={totalUsersCount}\r\n\t\t\t\tpageSize={pageSize}\r\n\t\t\t/>\r\n\t\t\t{users.map(user => (\r\n\t\t\t\t<User\r\n\t\t\t\t\tkey={user.id}\r\n\t\t\t\t\tuser={user}\r\n\t\t\t\t\tfollowingInProgress={followingInProgress}\r\n\t\t\t\t\tfollow={follow}\r\n\t\t\t\t\tunfollow={unfollow}\r\n\t\t\t\t/>\r\n\t\t\t))}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Users\r\n","import { createSelector } from 'reselect'\r\n\r\nconst getUsersSelector = state => {\r\n\treturn state.usersPage.users\r\n}\r\n\r\nexport const getUsers = createSelector(getUsersSelector, users => {\r\n\treturn users.filter(user => true)\r\n})\r\n\r\nexport const getPageSize = state => {\r\n\treturn state.usersPage.pageSize\r\n}\r\n\r\nexport const getTotalUsersCount = state => {\r\n\treturn state.usersPage.totalUsersCount\r\n}\r\n\r\nexport const getCurrentPage = state => {\r\n\treturn state.usersPage.currentPage\r\n}\r\n\r\nexport const getIsFetching = state => {\r\n\treturn state.usersPage.isFetching\r\n}\r\n\r\nexport const getFollowingInProgress = state => {\r\n\treturn state.usersPage.followingInProgress\r\n}\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { follow, unfollow, requestUsers } from '../../redux/usersReducer'\r\nimport Users from './Users'\r\nimport Preloader from '../common/Preloader/Preloader'\r\n// import { withAuthRedirect } from '../../hoc/withAuthRedirect'\r\nimport { compose } from 'redux'\r\nimport {\r\n\tgetUsers,\r\n\tgetCurrentPage,\r\n\tgetFollowingInProgress,\r\n\tgetIsFetching,\r\n\tgetPageSize,\r\n\tgetTotalUsersCount,\r\n} from '../../redux/usersSelectors'\r\n\r\nclass UsersContainer extends Component {\r\n\tcomponentDidMount() {\r\n\t\tconst { currentPage, pageSize } = this.props\r\n\t\tthis.props.requestUsers(currentPage, pageSize)\r\n\t}\r\n\r\n\tonPageChanged = pageNumber => {\r\n\t\tconst { pageSize } = this.props\r\n\t\tthis.props.requestUsers(pageNumber, pageSize)\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t{this.props.isFetching ? <Preloader /> : null}\r\n\t\t\t\t<Users\r\n\t\t\t\t\tonPageChanged={this.onPageChanged}\r\n\t\t\t\t\ttotalUsersCount={this.props.totalUsersCount}\r\n\t\t\t\t\tpageSize={this.props.pageSize}\r\n\t\t\t\t\tcurrentPage={this.props.currentPage}\r\n\t\t\t\t\tusers={this.props.users}\r\n\t\t\t\t\tfollow={this.props.follow}\r\n\t\t\t\t\tunfollow={this.props.unfollow}\r\n\t\t\t\t\tfollowingInProgress={this.props.followingInProgress}\r\n\t\t\t\t/>\r\n\t\t\t</>\r\n\t\t)\r\n\t}\r\n}\r\n\r\n// const mapStateToProps = state => {\r\n// \treturn {\r\n// \t\tusers: state.usersPage.users,\r\n// \t\tpageSize: state.usersPage.pageSize,\r\n// \t\ttotalUsersCount: state.usersPage.totalUsersCount,\r\n// \t\tcurrentPage: state.usersPage.currentPage,\r\n// \t\tisFetching: state.usersPage.isFetching,\r\n// \t\tfollowingInProgress: state.usersPage.followingInProgress,\r\n// \t}\r\n// }\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tusers: getUsers(state),\r\n\t\tpageSize: getPageSize(state),\r\n\t\ttotalUsersCount: getTotalUsersCount(state),\r\n\t\tcurrentPage: getCurrentPage(state),\r\n\t\tisFetching: getIsFetching(state),\r\n\t\tfollowingInProgress: getFollowingInProgress(state),\r\n\t}\r\n}\r\n\r\nexport default compose(\r\n\tconnect(mapStateToProps, {\r\n\t\tfollow,\r\n\t\tunfollow,\r\n\t\trequestUsers,\r\n\t})\r\n\t// withAuthRedirect\r\n)(UsersContainer)\r\n","import React from 'react'\r\nimport classes from './Login.module.css'\r\nimport { Field, reduxForm } from 'redux-form'\r\nimport { createField, Input } from '../common/FormsControls/FormsControls'\r\nimport { required } from '../../utils/validators/validators'\r\nimport { connect } from 'react-redux'\r\nimport { login, logout } from '../../redux/authReducer'\r\nimport { Redirect } from 'react-router-dom'\r\n\r\nconst LoginForm = ({ handleSubmit, error, captchaUrl }) => (\r\n\t<form onSubmit={handleSubmit}>\r\n\t\t<div>\r\n\t\t\t<Field\r\n\t\t\t\tplaceholder={'Email'}\r\n\t\t\t\tname={'email'}\r\n\t\t\t\tcomponent={Input}\r\n\t\t\t\tvalidate={[required]}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t\t<div>\r\n\t\t\t<Field\r\n\t\t\t\tplaceholder={'Password'}\r\n\t\t\t\tname={'password'}\r\n\t\t\t\ttype={'password'}\r\n\t\t\t\tcomponent={Input}\r\n\t\t\t\tvalidate={[required]}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t\t<div>\r\n\t\t\t<Field type={'checkbox'} name={'rememberMe'} component={Input} /> remember\r\n\t\t\tme\r\n\t\t</div>\r\n\r\n\t\t{captchaUrl && <img src={captchaUrl} alt=\"captcha\" />}\r\n\t\t{captchaUrl &&\r\n\t\t\tcreateField('Symbols form image', 'captcha', [required], Input, {})}\r\n\r\n\t\t{error && <div className={classes.form_summary_error}>{error}</div>}\r\n\t\t<div>\r\n\t\t\t<button type={'submit'}>Login</button>\r\n\t\t</div>\r\n\t</form>\r\n)\r\n\r\nconst LoginReduxForm = reduxForm({\r\n\tform: 'login',\r\n})(LoginForm)\r\n\r\nconst Login = props => {\r\n\tconst onSubmit = formData => {\r\n\t\tprops.login(\r\n\t\t\tformData.email,\r\n\t\t\tformData.password,\r\n\t\t\tformData.rememberMe,\r\n\t\t\tformData.captcha\r\n\t\t)\r\n\t}\r\n\r\n\tif (props.isAuth) {\r\n\t\treturn <Redirect to={'/profile'} />\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className={classes.wrap}>\r\n\t\t\t<h1>Login</h1>\r\n\t\t\t<LoginReduxForm onSubmit={onSubmit} captchaUrl={props.captchaUrl} />\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tcaptchaUrl: state.auth.captchaUrl,\r\n\t\tisAuth: state.auth.isAuth,\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, { login, logout })(Login)\r\n","import { getAuthUserData } from './authReducer'\r\n\r\nconst INITIALIZED_SUCCESS = 'social-network/app/INITIALIZED_SUCCESS'\r\n\r\nconst initialState = {\r\n\tinitialized: false,\r\n}\r\n\r\nconst appReducer = (state = initialState, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase INITIALIZED_SUCCESS:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tinitialized: true,\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n\r\n// action creators\r\nexport const initializedSuccess = () => ({\r\n\ttype: INITIALIZED_SUCCESS,\r\n})\r\n\r\n// thunk creators\r\nexport const initializeApp = () => dispatch => {\r\n\tconst promise = dispatch(getAuthUserData())\r\n\r\n\tPromise.all([promise]).then(() => {\r\n\t\tdispatch(initializedSuccess())\r\n\t})\r\n}\r\n\r\nexport default appReducer\r\n","const sidebarReducer = (state = {}, action) => {\r\n\treturn state\r\n}\r\n\r\nexport default sidebarReducer\r\n","import { combineReducers, createStore, applyMiddleware, compose } from 'redux'\r\nimport profileReducer from './profileReducer'\r\nimport dialogsReducer from './dialogsReducer'\r\nimport sidebarReducer from './sidebarReducer'\r\nimport usersReducer from './usersReducer'\r\nimport authReducer from './authReducer'\r\nimport thunkMiddleware from 'redux-thunk'\r\nimport { reducer as formReducer } from 'redux-form'\r\nimport appReducer from './appRecucer'\r\n\r\nconst reducers = combineReducers({\r\n\tprofilePage: profileReducer,\r\n\tdialogsPage: dialogsReducer,\r\n\tsidebar: sidebarReducer,\r\n\tusersPage: usersReducer,\r\n\tauth: authReducer,\r\n\tform: formReducer,\r\n\tapp: appReducer,\r\n})\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose\r\nconst store = createStore(\r\n\treducers,\r\n\t/* preloadedState, */ composeEnhancers(applyMiddleware(thunkMiddleware))\r\n)\r\n\r\nexport default store\r\n","import React, { Suspense } from 'react'\r\nimport Preloader from '../components/common/Preloader/Preloader'\r\n\r\nexport const withSuspense = Component => {\r\n\treturn props => {\r\n\t\treturn (\r\n\t\t\t<Suspense fallback={<Preloader />}>\r\n\t\t\t\t<Component {...props} />\r\n\t\t\t</Suspense>\r\n\t\t)\r\n\t}\r\n}\r\n","import React from 'react'\r\n\r\nconst NotFound = () => (\r\n\t<h2 style={{ padding: '0 10px' }}>404 - Page not found :(</h2>\r\n)\r\n\r\nexport default NotFound\r\n","import React from 'react'\r\nimport './App.css'\r\nimport {\r\n\tHashRouter as Router,\r\n\tRedirect,\r\n\tRoute,\r\n\tSwitch,\r\n\twithRouter,\r\n} from 'react-router-dom'\r\nimport Navbar from './components/Navbar/Navbar'\r\nimport HeaderContainer from './components/Header/HeaderContainer'\r\nimport UsersContainer from './components/Users/UsersContainer'\r\nimport LoginPage from './components/Login/Login'\r\nimport { connect, Provider } from 'react-redux'\r\nimport { compose } from 'redux'\r\nimport { initializeApp } from './redux/appRecucer'\r\nimport Preloader from './components/common/Preloader/Preloader'\r\nimport store from './redux/store'\r\nimport { withSuspense } from './hoc/withSuspense'\r\nimport NotFound from './components/NotFound/NotFound'\r\n\r\nconst DialogsContainer = React.lazy(() =>\r\n\timport('./components/Dialogs/DialogsContainer')\r\n)\r\nconst ProfileContainer = React.lazy(() =>\r\n\timport('./components/Profile/ProfileContainer')\r\n)\r\n\r\nclass App extends React.Component {\r\n\tcomponentDidMount() {\r\n\t\tthis.props.initializeApp()\r\n\t}\r\n\r\n\trender() {\r\n\t\tif (!this.props.initialized) {\r\n\t\t\treturn <Preloader />\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"app-wrapper\">\r\n\t\t\t\t<HeaderContainer />\r\n\t\t\t\t<Navbar />\r\n\t\t\t\t<div className=\"app-wrapper__content\">\r\n\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t<Redirect exact from=\"/\" to=\"/profile\" />\r\n\t\t\t\t\t\t<Route path=\"/dialogs\" render={withSuspense(DialogsContainer)} />\r\n\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\t\tpath=\"/profile/:userId?\"\r\n\t\t\t\t\t\t\trender={withSuspense(ProfileContainer)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Route path=\"/users\" render={() => <UsersContainer />} />\r\n\t\t\t\t\t\t<Route path=\"/login\" render={() => <LoginPage />} />\r\n\t\t\t\t\t\t<Route component={NotFound} />\r\n\t\t\t\t\t</Switch>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n\tinitialized: state.app.initialized,\r\n})\r\n\r\nconst AppContainer = compose(\r\n\twithRouter,\r\n\tconnect(mapStateToProps, { initializeApp })\r\n)(App)\r\n\r\nconst MainApp = props => {\r\n\treturn (\r\n\t\t<Router>\r\n\t\t\t<Provider store={store}>\r\n\t\t\t\t<AppContainer />\r\n\t\t\t</Provider>\r\n\t\t</Router>\r\n\t)\r\n}\r\n\r\nexport default MainApp\r\n","import React from 'react'\r\nimport './index.css'\r\nimport ReactDOM from 'react-dom'\r\nimport MainApp from './App'\r\n\r\nReactDOM.render(<MainApp />, document.getElementById('root'))\r\n","import React from 'react'\r\nimport classes from './Preloader.module.css'\r\n\r\nconst Preloader = () => {\r\n\treturn (\r\n\t\t<div className={classes.spinner}>\r\n\t\t\t<div />\r\n\t\t\t<div />\r\n\t\t\t<div />\r\n\t\t\t<div />\r\n\t\t\t<div />\r\n\t\t\t<div />\r\n\t\t\t<div />\r\n\t\t\t<div />\r\n\t\t\t<div />\r\n\t\t\t<div />\r\n\t\t\t<div />\r\n\t\t\t<div />\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Preloader\r\n","import React from 'react'\r\nimport classes from './FormsControls.module.css'\r\nimport { Field } from 'redux-form'\r\n\r\nexport const FormControl = ({\r\n\tinput,\r\n\tmeta: { touched, error, warning },\r\n\t...restProps\r\n}) => {\r\n\tconst hasError = touched && error\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={`${classes.form_control} ${\r\n\t\t\t\thasError ? classes.error : ''\r\n\t\t\t}`.trim()}\r\n\t\t>\r\n\t\t\t<div>{restProps.children}</div>\r\n\t\t\t{hasError && <span>{error}</span>}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport const Textarea = props => {\r\n\tconst { input, meta, ...restProps } = props\r\n\treturn (\r\n\t\t<FormControl {...props}>\r\n\t\t\t<textarea {...input} {...restProps} />\r\n\t\t</FormControl>\r\n\t)\r\n}\r\n\r\nexport const Input = props => {\r\n\tconst { input, meta, ...restProps } = props\r\n\treturn (\r\n\t\t<FormControl meta={meta} {...restProps}>\r\n\t\t\t<input {...input} {...restProps} />\r\n\t\t</FormControl>\r\n\t)\r\n}\r\n\r\nexport const createField = (\r\n\tplaceholder,\r\n\tname,\r\n\tvalidators,\r\n\tcomponent,\r\n\tprops = {},\r\n\ttext = ''\r\n) => (\r\n\t<div>\r\n\t\t<Field\r\n\t\t\tplaceholder={placeholder}\r\n\t\t\tname={name}\r\n\t\t\tvalidate={validators}\r\n\t\t\tcomponent={component}\r\n\t\t\t{...props}\r\n\t\t/>\r\n\t\t{text}\r\n\t</div>\r\n)\r\n","export const required = value =>\r\n\tvalue || typeof value === 'number' ? undefined : 'Required'\r\n\r\nexport const maxLength = max => value =>\r\n\tvalue && value.length > max ? `Must be ${max} characters or less` : undefined\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"userPhoto\":\"Users_userPhoto__3lgv7\",\"wrap\":\"Users_wrap__2zcXP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"paginationList\":\"Paginator_paginationList__3basV\",\"page\":\"Paginator_page__1s8Mv\",\"selectedPage\":\"Paginator_selectedPage__HFX5v\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__2JVgj\",\"login_block\":\"Header_login_block__3_6n8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrap\":\"Login_wrap__1toJL\",\"form_summary_error\":\"Login_form_summary_error__D0mXl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form_control\":\"FormsControls_form_control__1wyQv\",\"error\":\"FormsControls_error__Bvj37\"};","import { profileAPI } from '../api/api'\r\nimport { stopSubmit } from 'redux-form'\r\n\r\nconst ADD_POST = 'social-network/profile/ADD_POST'\r\nconst SET_USER_PROFILE = 'social-network/profile/SET_USER_PROFILE'\r\nconst SET_STATUS = 'social-network/profile/SET_STATUS'\r\nconst DELETE_POST = 'social-network/profile/DELETE_POST'\r\nconst SAVE_PHOTO_SUCCESS = 'social-network/profile/SAVE_PHOTO_SUCCESS'\r\n\r\nconst initialState = {\r\n\tposts: [\r\n\t\t{ id: 1, message: 'Hi, how are you?', likesCount: 0 },\r\n\t\t{ id: 2, message: \"It's my first post\", likesCount: 23 },\r\n\t\t{ id: 3, message: 'Blabla', likesCount: 11 },\r\n\t\t{ id: 4, message: 'This is React, baby', likesCount: 100 },\r\n\t],\r\n\tprofile: null,\r\n\tstatus: '',\r\n}\r\n\r\nconst profileReducer = (state = initialState, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase ADD_POST:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tposts: [\r\n\t\t\t\t\t...state.posts,\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 5,\r\n\t\t\t\t\t\tmessage: action.newPost,\r\n\t\t\t\t\t\tlikesCount: 0,\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t}\r\n\t\tcase SET_STATUS:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tstatus: action.status,\r\n\t\t\t}\r\n\t\tcase SET_USER_PROFILE:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tprofile: action.profile,\r\n\t\t\t}\r\n\t\tcase DELETE_POST:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tposts: state.posts.filter(post => post.id !== action.postId),\r\n\t\t\t}\r\n\t\tcase SAVE_PHOTO_SUCCESS:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tprofile: { ...state.profile, photos: action.photos },\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n\r\n//action creators\r\nexport const addPost = newPost => ({ type: ADD_POST, newPost })\r\nexport const setUserProfile = profile => ({ type: SET_USER_PROFILE, profile })\r\nexport const setStatus = status => ({ type: SET_STATUS, status })\r\nexport const deletePost = postId => ({ type: DELETE_POST, postId })\r\nconst savePhotoSuccess = photos => ({ type: SAVE_PHOTO_SUCCESS, photos })\r\n\r\n// thunk creators\r\nexport const getUserProfile = userId => async dispatch => {\r\n\ttry {\r\n\t\tconst data = await profileAPI.getProfile(userId)\r\n\t\tdispatch(setUserProfile(data))\r\n\t} catch (e) {\r\n\t\t// eslint-disable-next-line no-console\r\n\t\tconsole.log('OOooops!!!', e.message)\r\n\t}\r\n}\r\n\r\nexport const getStatus = userId => async dispatch => {\r\n\ttry {\r\n\t\tconst data = await profileAPI.getStatus(userId)\r\n\t\tdispatch(setStatus(data))\r\n\t} catch (e) {\r\n\t\t// eslint-disable-next-line no-console\r\n\t\tconsole.log('OOooops!!!', e.message)\r\n\t}\r\n}\r\n\r\nexport const updateStatus = status => async dispatch => {\r\n\tconst data = await profileAPI.updateStatus(status)\r\n\tif (data.resultCode === 0) {\r\n\t\tdispatch(setStatus(status))\r\n\t}\r\n}\r\n\r\nexport const savePhoto = file => async dispatch => {\r\n\tconst data = await profileAPI.savePhoto(file)\r\n\tif (data.resultCode === 0) {\r\n\t\tdispatch(savePhotoSuccess(data.data.photos))\r\n\t}\r\n}\r\n\r\nexport const saveProfile = profile => async (dispatch, getState) => {\r\n\tconst userId = getState().auth.userId\r\n\tconst data = await profileAPI.saveProfile(profile)\r\n\r\n\tif (data.resultCode === 0) {\r\n\t\tdispatch(getUserProfile(userId))\r\n\t} else {\r\n\t\tconst message = data.messages.length > 0 ? data.messages[0] : 'Some error'\r\n\t\tdispatch(stopSubmit('edit-profile', { _error: message }))\r\n\t\treturn Promise.reject(data.messages[0])\r\n\t}\r\n}\r\n\r\nexport default profileReducer\r\n"],"sourceRoot":""}